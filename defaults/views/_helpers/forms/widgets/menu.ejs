<%
// receives (field, fieldName, first, fieldData)
%><select name="<%= fieldName %>"<% if (first) { %> autofocus<% } %> class="form-control">
<?
(function() {
<%
if (field.required) {
%>	var selected = false;
	if (value == '') {
		selected = true;
		?>  <option value="" selected></option>
<?
	}
?><%
} else {
%>	var selected = true;
	?>  <option value=""<? if (value == '') { ?> selected<? } ?>>(none)</option>
<%
}
%><?
	_.forEach(fieldData, function(item) {
		?>  <option value="<?= item.id ?>"<?
		if (value == item.id) {
			?> selected<?
			selected = true;
		}
		?>><?= item.name ?></option>
<?
	});

	if (!selected) {
		//xxx find a way to put to the top of the options
		?><option value="" selected></option><?
	}
})();
?></select>